<!DOCTYPE html>
<html lang="es" class="dark">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Domicilios Tierra Querida</title>

    <!-- ‚úÖ Forzar siempre dark -->
    <meta name="color-scheme" content="dark" />
    <meta name="supported-color-schemes" content="dark" />

    <script>
      (function () {
        const root = document.documentElement;
        const forceDark = () => {
          if (!root.classList.contains("dark")) root.classList.add("dark");
        };
        forceDark();
        const obs = new MutationObserver(forceDark);
        obs.observe(root, { attributes: true, attributeFilter: ["class"] });
      })();
    </script>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script id="tailwind-config">
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#e02424",
              "background-dark": "#171111",
              "surface-dark": "#261c1c",
              "surface-dark-hover": "#3a2a2a",
              "border-dark": "#382929",
            },
            fontFamily: {
              display: ["Plus Jakarta Sans", "sans-serif"],
            },
            borderRadius: {
              DEFAULT: "1rem",
              lg: "1.5rem",
              xl: "2rem",
              "2xl": "2.5rem",
              full: "9999px",
            },
          },
        },
      };
    </script>

    <!-- Fuentes -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
      rel="stylesheet"
    />

    <style>
      .no-scrollbar::-webkit-scrollbar {
        display: none;
      }
      .no-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      html {
        scroll-behavior: smooth;
      }

      /* ‚úÖ Clamp sin plugin (para t√≠tulos del hero en m√≥vil) */
      .clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }
      .clamp-3 {
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }
    </style>

    <!-- CSS propio (modales/men√∫ + extras) -->
    <link rel="stylesheet" href="/styles.css" />
  </head>

  <body
    id="home-page"
    class="bg-background-dark text-white font-display overflow-x-hidden selection:bg-primary selection:text-white"
  >
    <!-- LOADER -->
    <div
      id="page-loader"
      class="fixed inset-0 z-[9999] flex items-center justify-center bg-black/90 backdrop-blur-sm transition-opacity duration-300"
    >
      <div class="flex flex-col items-center gap-4">
        <img
          src="/img/loader.gif"
          alt="Cargando Tierra Querida"
          class="w-28 h-28 object-contain"
        />
        <p
          class="text-xs sm:text-sm font-semibold tracking-[0.3em] uppercase text-white/80 text-center"
        >
          Cargando
        </p>
      </div>
    </div>

    <div class="relative flex min-h-screen w-full flex-col">
      <!-- HEADER (nuevo estilo) -->
      <header
        class="sticky top-0 z-50 w-full backdrop-blur-md bg-[#171111]/80 border-b border-border-dark"
      >
        <div
          class="max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-12 py-4 flex items-center justify-between gap-4"
        >
          <!-- Brand -->
          <div class="flex items-center gap-3">
            <div
              class="size-10 bg-primary rounded-full flex items-center justify-center text-white"
            >
              <span class="material-symbols-outlined">lunch_dining</span>
            </div>
            <div class="hidden sm:block leading-tight">
              <h2 class="text-lg font-extrabold tracking-tight">
                Tierra Querida
              </h2>
              <p
                class="text-[11px] text-white/60 font-semibold tracking-[0.2em] uppercase"
              >
                domicilios
              </p>
            </div>
          </div>

          <!-- Nav -->
          <nav class="hidden md:flex items-center gap-8">
            <a
              class="text-sm font-bold hover:text-primary transition-colors"
              href="#products-section"
              >Men√∫</a
            >
            <a
              class="text-sm font-bold text-white/70 hover:text-white transition-colors"
              href="#about-section"
              >Nosotros</a
            >
            <a
              class="text-sm font-bold text-white/70 hover:text-white transition-colors"
              href="#instagram-section"
              >Comunidad</a
            >
          </nav>

          <!-- Actions -->
          <div class="flex items-center gap-3 sm:gap-4">
            <!-- Search -->
            <div
              class="hidden lg:flex items-center bg-surface-dark rounded-full px-4 h-10 w-72 border border-transparent focus-within:border-primary/50 transition-colors"
            >
              <span class="material-symbols-outlined text-white/50 text-[20px]"
                >search</span
              >
              <input
                id="header-search"
                class="bg-transparent border-none text-sm text-white placeholder-white/40 focus:ring-0 w-full h-full"
                placeholder="Buscar tu antojo..."
                type="text"
                autocomplete="off"
              />
            </div>

            <!-- Usuario -->
            <button
              class="p-2 hover:bg-surface-dark rounded-full transition-colors"
              id="user-icon"
              aria-label="Perfil"
            >
              <span class="material-symbols-outlined">person</span>
            </button>

            <!-- Men√∫ lateral -->
            <button
              class="p-2 hover:bg-surface-dark rounded-full transition-colors"
              id="menu-icon"
              aria-label="Men√∫"
            >
              <span class="material-symbols-outlined">menu</span>
            </button>

            <!-- Carrito -->
            <button
              class="relative flex items-center gap-2 bg-primary hover:bg-red-700 text-white px-4 h-10 rounded-full transition-all"
              id="cart-icon"
              aria-label="Carrito"
            >
              <span class="material-symbols-outlined text-[20px]"
                >shopping_bag</span
              >
              <span
                class="font-extrabold text-sm hidden sm:block"
                id="cart-count"
                >0</span
              >

              <!-- Badge m√≥vil -->
              <span
                class="cart-count absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-white text-[10px] font-extrabold text-primary sm:hidden"
              >
                <span id="cart-count-badge">0</span>
              </span>
            </button>

            <!-- Nombre usuario -->
            <span
              id="user-name-header"
              class="hidden lg:inline text-sm font-semibold text-white/80 truncate max-w-[180px]"
            ></span>
          </div>
        </div>
      </header>

      <!-- MEN√ö LATERAL (igual que antes) -->
      <nav class="menu" id="menu">
        <ul id="menu-list">
          <li class="menu-item"><a href="/stores">Puntos de venta</a></li>
          <li class="menu-item"><a href="/history">Hist√≥rico de pedidos</a></li>

          <li class="menu-item" id="menu-login-item">
            <a href="/login">Iniciar sesi√≥n</a>
          </li>

          <li class="menu-item hidden" id="menu-logout-item">
            <button type="button" id="logout-button" class="w-full text-left">
              Cerrar sesi√≥n
            </button>
          </li>
        </ul>

        <button class="close-menu" id="close-menu">
          <span class="material-symbols-outlined">close</span>
        </button>
      </nav>
      <div class="overlay" id="overlay"></div>

      <!-- MAIN -->
      <main
        class="flex-1 w-full max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-12 py-6 sm:py-8 flex flex-col gap-8 sm:gap-12"
      >
        <!-- HERO GRID (ajustado para m√≥vil) -->
        <section class="grid grid-cols-1 lg:grid-cols-12 gap-6">
          <!-- Featured hero -->
          <div
            class="lg:col-span-8 relative rounded-2xl overflow-hidden group border border-white/5 bg-surface-dark aspect-[4/3] sm:aspect-video lg:aspect-auto lg:h-[520px]"
          >
            <div id="hero-feature" class="absolute inset-0"></div>

            <!-- NAV carrusel -->
            <button
              id="hero-prev"
              class="absolute left-4 top-1/2 -translate-y-1/2 z-10 size-11 rounded-full bg-black/50 hover:bg-black/70 border border-white/10 flex items-center justify-center"
              aria-label="Anterior"
              type="button"
            >
              <span class="material-symbols-outlined">chevron_left</span>
            </button>
            <button
              id="hero-next"
              class="absolute right-4 top-1/2 -translate-y-1/2 z-10 size-11 rounded-full bg-black/50 hover:bg-black/70 border border-white/10 flex items-center justify-center"
              aria-label="Siguiente"
              type="button"
            >
              <span class="material-symbols-outlined">chevron_right</span>
            </button>
            <div
              id="hero-dots"
              class="absolute bottom-5 left-1/2 -translate-x-1/2 z-10 flex gap-2"
            ></div>
          </div>

          <!-- Side cards (solo desktop) -->
          <div class="hidden lg:flex lg:col-span-4 flex-col gap-6 h-[520px]">
            <div
              class="flex-1 relative rounded-2xl overflow-hidden group bg-surface-dark border border-white/5"
              id="hero-side-a"
            ></div>

            <div
              class="flex-1 relative rounded-2xl overflow-hidden group bg-surface-dark border border-white/5"
              id="hero-side-b"
            ></div>
          </div>
        </section>

        <!-- CATEGOR√çAS -->
        <section
          class="rounded-2xl border border-border-dark bg-surface-dark p-4"
        >
          <div class="flex items-center justify-between gap-3 mb-3">
            <h2 class="text-lg sm:text-xl font-extrabold">Explora el men√∫</h2>
            <a
              href="/stores"
              class="text-sm font-bold text-white/60 hover:text-white flex items-center gap-1"
            >
              Ver todo
              <span class="material-symbols-outlined text-[18px]"
                >arrow_right_alt</span
              >
            </a>
          </div>

          <div
            id="category-tabs"
            class="flex gap-3 overflow-x-auto no-scrollbar pb-2"
          >
            <button
              id="tab-hamburguesas"
              class="tab-btn tab-btn--active flex shrink-0 items-center gap-2 rounded-full bg-primary px-5 py-2.5 shadow-lg shadow-primary/20 transition-transform hover:scale-[1.02]"
              data-tipo="1"
              type="button"
            >
              <span class="material-symbols-outlined text-white text-[20px]"
                >lunch_dining</span
              >
              <span class="tab-label text-sm font-extrabold text-white"
                >Hamburguesas</span
              >
            </button>

            <button
              id="tab-combos"
              class="tab-btn flex shrink-0 items-center gap-2 rounded-full bg-[#382929] px-5 py-2.5 text-white/70 transition-all hover:bg-[#4a3b3b] hover:text-white"
              data-tipo="3"
              type="button"
            >
              <span class="material-symbols-outlined text-[20px]"
                >restaurant</span
              >
              <span class="tab-label text-sm font-semibold">Combos</span>
            </button>

            <button
              id="tab-papas"
              class="tab-btn flex shrink-0 items-center gap-2 rounded-full bg-[#382929] px-5 py-2.5 text-white/70 transition-all hover:bg-[#4a3b3b] hover:text-white"
              data-tipo="4"
              type="button"
            >
              <span class="material-symbols-outlined text-[20px]"
                >fastfood</span
              >
              <span class="tab-label text-sm font-semibold">Papas</span>
            </button>

            <button
              id="tab-bebidas"
              class="tab-btn flex shrink-0 items-center gap-2 rounded-full bg-[#382929] px-5 py-2.5 text-white/70 transition-all hover:bg-[#4a3b3b] hover:text-white"
              data-tipo="6"
              type="button"
            >
              <span class="material-symbols-outlined text-[20px]"
                >local_bar</span
              >
              <span class="tab-label text-sm font-semibold">Bebidas</span>
            </button>
          </div>
        </section>

        <!-- PRODUCTOS -->
        <section
          id="products-section"
          class="rounded-2xl border border-border-dark bg-surface-dark p-6"
        >
          <div class="flex items-end justify-between mb-6">
            <div>
              <p
                class="text-primary font-extrabold uppercase tracking-[0.2em] text-[11px] mb-2"
              >
                Nuestro men√∫
              </p>
              <h2 class="text-2xl sm:text-3xl font-black text-white">
                Elige tu favorito
              </h2>
            </div>

            <div class="flex gap-2">
              <button
                id="products-prev"
                class="size-10 rounded-full border border-border-dark flex items-center justify-center text-white hover:bg-primary hover:border-primary transition-colors disabled:opacity-40 disabled:cursor-not-allowed"
                disabled
                aria-label="Productos anteriores"
                type="button"
              >
                <span class="material-symbols-outlined">arrow_back</span>
              </button>
              <button
                id="products-next"
                class="size-10 rounded-full border border-border-dark flex items-center justify-center text-white hover:bg-primary hover:border-primary transition-colors disabled:opacity-40 disabled:cursor-not-allowed"
                aria-label="M√°s productos"
                type="button"
              >
                <span class="material-symbols-outlined">arrow_forward</span>
              </button>
            </div>
          </div>

          <div class="relative" id="products-carousel-wrapper">
            <div
              id="products-viewport"
              class="overflow-x-auto no-scrollbar scroll-smooth snap-x snap-mandatory"
            >
              <!-- ‚úÖ pr-* = ‚Äúpeek‚Äù constante cuando hay overflow -->
              <div
                id="products-container"
                class="flex gap-4 sm:gap-5 py-2 pl-1 pr-12 sm:pr-14 lg:pr-16"
              ></div>
            </div>

            <div
              id="products-fade-right"
              class="pointer-events-none absolute right-0 top-0 h-full w-16 bg-gradient-to-l from-[#261c1c] to-transparent opacity-0 transition-opacity duration-300"
            ></div>
          </div>
        </section>

        <!-- ABOUT -->
        <section
          id="about-section"
          class="rounded-3xl overflow-hidden border border-border-dark bg-surface-dark flex flex-col md:flex-row"
        >
          <div
            class="flex-1 p-8 md:p-12 flex flex-col justify-center items-start gap-4"
          >
            <span
              class="text-primary font-extrabold tracking-widest text-xs uppercase"
              id="about-tagline"
              >#Movimiento TQ</span
            >
            <h2
              class="text-3xl md:text-4xl font-extrabold leading-tight"
              id="about-title"
            >
              Pasi√≥n por el fuego, <br />Amor por el sabor.
            </h2>

            <div
              id="about-paragraphs"
              class="space-y-3 text-white/70 text-sm md:text-base leading-relaxed max-w-md"
            ></div>

            <div class="flex items-center gap-2 text-white/60 text-sm">
              <span class="material-symbols-outlined text-[18px]"
                >verified</span
              >
              <span id="about-badge-text"
                >+100 puntos de venta en Colombia</span
              >
            </div>

            <a
              id="about-cta-stores"
              href="/stores"
              class="mt-2 inline-flex items-center gap-2 bg-primary hover:bg-red-700 text-white font-extrabold px-6 py-3 rounded-full transition-colors"
            >
              <span>Pide aqu√≠</span>
              <span class="material-symbols-outlined text-[18px]"
                >arrow_forward</span
              >
            </a>

            <a
              id="social-instagram"
              class="text-white/70 hover:text-white font-bold text-sm flex items-center gap-2 mt-1"
              target="_blank"
              rel="noopener noreferrer"
              href="https://www.instagram.com/tierraquerida20/"
            >
              <span class="material-symbols-outlined text-[18px]"
                >photo_camera</span
              >
              <span
                >S√≠guenos en
                <span id="instagram-handle">@tierraquerida20</span></span
              >
            </a>
          </div>

          <div class="flex-1 min-h-[320px] md:min-h-[420px] relative">
            <img
              id="about-image"
              src="./img/empleados.png"
              alt="Equipo de Tierra Querida"
              class="absolute inset-0 w-full h-full object-cover"
            />
            <div
              class="absolute inset-0 bg-gradient-to-r from-black/70 via-black/20 to-transparent"
            ></div>
          </div>
        </section>

        <!-- INSTAGRAM -->
        <section id="instagram-section" class="py-2">
          <div class="flex items-center gap-2 mb-4 text-white/60">
            <span class="material-symbols-outlined">photo_camera</span>
            <span class="text-sm font-extrabold uppercase tracking-wider"
              >Comunidad</span
            >
          </div>

          <div
            id="instagram-grid"
            class="flex overflow-x-auto gap-4 pb-4 no-scrollbar snap-x snap-mandatory"
          ></div>
        </section>
      </main>

      <!-- FOOTER -->
      <footer class="bg-surface-dark border-t border-border-dark py-12">
        <div
          class="max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-12 grid grid-cols-1 md:grid-cols-4 gap-8"
        >
          <div class="col-span-1 md:col-span-2">
            <div class="flex items-center gap-3 mb-4">
              <div
                class="size-9 bg-primary rounded-full flex items-center justify-center text-white"
              >
                <span class="material-symbols-outlined text-sm"
                  >lunch_dining</span
                >
              </div>
              <h2 class="text-lg font-extrabold">Tierra Querida</h2>
            </div>
            <p class="text-white/60 text-sm max-w-xs">
              Las mejores hamburguesas, hechas con ingredientes locales y mucha
              pasi√≥n.
            </p>
          </div>

          <div>
            <h3 class="font-extrabold text-white mb-4">Enlaces</h3>
            <ul class="flex flex-col gap-2 text-sm text-white/60">
              <li>
                <a
                  class="hover:text-primary transition-colors"
                  href="#products-section"
                  >Men√∫</a
                >
              </li>
              <li>
                <a class="hover:text-primary transition-colors" href="/stores"
                  >Ubicaciones</a
                >
              </li>
              <li>
                <a class="hover:text-primary transition-colors" href="/history"
                  >Hist√≥rico</a
                >
              </li>
              <li>
                <a class="hover:text-primary transition-colors" href="#"
                  >Pol√≠tica de Privacidad</a
                >
              </li>
            </ul>
          </div>

          <div>
            <h3 class="font-extrabold text-white mb-4">Contacto</h3>
            <ul class="flex flex-col gap-2 text-sm text-white/60">
              <li class="flex items-center gap-2">
                <span class="material-symbols-outlined text-xs"
                  >location_on</span
                >
                Colombia
              </li>
              <li class="flex items-center gap-2">
                <span class="material-symbols-outlined text-xs">call</span>
                +57 3000000000
              </li>
              <li class="flex items-center gap-2">
                <span class="material-symbols-outlined text-xs">mail</span>
                hola@tierraquerida.com
              </li>
            </ul>
          </div>
        </div>

        <div
          class="max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-12 mt-10 pt-8 border-t border-border-dark flex flex-col md:flex-row justify-between items-center gap-4 text-xs text-white/40"
        >
          <p>¬© 2025 Tierra Querida. Todos los derechos reservados.</p>
          <div class="flex gap-4">
            <span class="cursor-pointer hover:text-white">Facebook</span>
            <span class="cursor-pointer hover:text-white">Instagram</span>
            <span class="cursor-pointer hover:text-white">Twitter</span>
          </div>
        </div>
      </footer>
    </div>

    <!-- MODAL ZOOM IMAGEN -->
    <div id="image-modal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <button class="modal-close" aria-label="Cerrar">‚úï</button>
        <img id="modal-image" src="" alt="" class="modal-image" />
        <p id="modal-caption" class="modal-caption"></p>
      </div>
    </div>

    <!-- MODAL PERFIL -->
    <div
      id="user-modal"
      class="fixed inset-0 z-40 hidden items-center justify-center bg-black/60"
    >
      <div
        class="bg-[#120a0a] rounded-2xl p-5 w-full max-w-md mx-4 shadow-2xl border border-white/10 relative"
      >
        <button
          id="user-modal-close"
          class="absolute top-3 right-3 text-sm text-gray-300 hover:text-primary transition-colors"
        >
          ‚úï
        </button>

        <h2 class="text-lg font-black mb-4 text-white text-center">
          Mi perfil
        </h2>

        <form id="user-form" class="space-y-3">
          <div>
            <label class="block text-sm font-semibold text-white/90 mb-1">
              Nombre
            </label>
            <input
              id="user-name-input"
              type="text"
              class="w-full rounded-xl border border-white/10 bg-white/5 px-3 py-2 text-sm text-white focus:ring-1 focus:ring-primary"
            />
          </div>

          <div>
            <label class="block text-sm font-semibold text-white/90 mb-1">
              Correo
            </label>
            <input
              id="user-email-input"
              type="email"
              disabled
              class="w-full rounded-xl border border-white/10 bg-white/5 px-3 py-2 text-sm text-gray-400 cursor-not-allowed"
            />
          </div>

          <div>
            <label class="block text-sm font-semibold text-white/90 mb-1">
              Celular (+57)
            </label>
            <input
              id="user-phone-input"
              type="tel"
              placeholder="+573001112233"
              class="w-full rounded-xl border border-white/10 bg-white/5 px-3 py-2 text-sm text-white focus:ring-1 focus:ring-primary"
            />
          </div>

          <div>
            <label class="block text-sm font-semibold text-white/90 mb-1">
              Direcci√≥n de entrega
            </label>
            <input
              id="user-address-input"
              type="text"
              class="w-full rounded-xl border border-white/10 bg-white/5 px-3 py-2 text-sm text-white focus:ring-1 focus:ring-primary"
            />
          </div>

          <button
            type="submit"
            class="mt-2 w-full rounded-full bg-primary hover:bg-red-700 text-white text-sm font-extrabold py-3 transition-colors"
          >
            Guardar cambios
          </button>
        </form>
      </div>
    </div>

    <!-- MODAL: CARRITO VAC√çO -->
    <div id="empty-cart-modal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div
        class="modal-content relative max-w-sm w-full mx-4 bg-[#120a0a] rounded-2xl p-5 shadow-2xl border border-white/10 flex flex-col gap-3"
      >
        <button
          id="empty-cart-close"
          class="absolute top-3 right-3 text-gray-300 hover:text-primary transition-colors text-sm"
          aria-label="Cerrar"
        >
          ‚úï
        </button>

        <h2 class="text-lg font-black text-white">Tu carrito est√° vac√≠o</h2>

        <p class="text-sm text-white/70">
          A√∫n no has agregado nada. Explora el men√∫ y arma tu pedido üçîüçü
        </p>

        <button
          id="empty-cart-go"
          class="mt-2 inline-flex items-center justify-center px-4 py-3 rounded-full bg-primary hover:bg-red-700 text-white text-sm font-extrabold tracking-wide transition"
        >
          Ir al men√∫
        </button>
      </div>
    </div>

    <!-- Toast -->
    <div
      id="toast"
      class="fixed bottom-4 left-1/2 -translate-x-1/2 z-50 hidden px-4 py-2 rounded-lg bg-black/80 text-white text-xs sm:text-sm shadow-lg"
    ></div>

    <!-- SCRIPT LOADER -->
    <script>
      (function () {
        const loader = document.getElementById("page-loader");
        if (!loader) return;

        function showLoader() {
          loader.style.display = "flex";
          loader.classList.remove("opacity-0", "pointer-events-none");
        }

        function hideLoader() {
          loader.classList.add("opacity-0", "pointer-events-none");
          setTimeout(() => {
            loader.style.display = "none";
          }, 350);
        }

        window.addEventListener("load", hideLoader);

        if (window.fetch) {
          const originalFetch = window.fetch.bind(window);
          let pending = 0;

          window.fetch = (...args) => {
            pending++;
            showLoader();
            return originalFetch(...args).finally(() => {
              pending--;
              if (pending <= 0) hideLoader();
            });
          };
        }
      })();
    </script>

    <!-- SCRIPT MODAL CARRITO VAC√çO -->
    <script>
      (function () {
        const modal = document.getElementById("empty-cart-modal");
        if (!modal) return;

        const backdrop = modal.querySelector(".modal-backdrop");
        const closeBtn = document.getElementById("empty-cart-close");
        const goBtn = document.getElementById("empty-cart-go");

        function openEmptyCartModal() {
          modal.classList.remove("hidden");
          modal.classList.add("open");
        }

        function closeEmptyCartModal() {
          modal.classList.remove("open");
          modal.classList.add("hidden");
        }

        window.openEmptyCartModal = openEmptyCartModal;

        closeBtn?.addEventListener("click", closeEmptyCartModal);
        backdrop?.addEventListener("click", closeEmptyCartModal);
        goBtn?.addEventListener("click", () => {
          closeEmptyCartModal();
          document
            .getElementById("products-section")
            ?.scrollIntoView({ behavior: "smooth" });
        });

        const cartIcon = document.getElementById("cart-icon");
        if (cartIcon) {
          cartIcon.addEventListener("click", (event) => {
            event.preventDefault();

            let items = [];
            try {
              let raw = localStorage.getItem("burgerCart");
              if (!raw) raw = localStorage.getItem("cart");
              items = raw ? JSON.parse(raw) : [];
              if (!Array.isArray(items)) items = [];
            } catch (e) {
              items = [];
            }

            if (!items || items.length === 0) {
              openEmptyCartModal();
              return;
            }
            window.location.href = "/cart";
          });
        }
      })();
    </script>

    <!-- JS del front -->
    <script type="module" src="/index.js"></script>
  </body>
</html>
